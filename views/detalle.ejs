<%- include("template/cabecera", {tituloWeb: 'Detalle de servicio'}) %> 

    <div class="container">
        <h1>Detalle servicio</h1>
        <% if (error) { %>
            <p><%= mensaje %></p> 
            <div class="d-grid gap-2">
            <a href="/servicios" class="btn btn-dark">Volver a Servicios</a>
            </div>
            
        <% } %>
        <% if (!error) { %>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Descripción</th>
                        <th scope="col">Precio</th>
                        <th scope="col">Acción</th>
                    </tr>
                </thead>
                <tbody>
                             <tr>
                                <th scope="row"><%= servicio.id %> </th>
                                <td><%= servicio.descripcion %></td>
                                <td><%= servicio.precio %></td>
                                <td>
                                    <button
                                        class="btn btn-danger btn-sm"
                                        id="btnEliminar"
                                        data-id="<%= servicio.id %>"
                                    >Eliminar</button>
                                </td>
                            </tr>
                </tbody>
            </table>
         
        <% } %>
     </div>
    
<%- include("template/footer") %>

<script>
    const btnEliminar = document.querySelector('#btnEliminar')
    btnEliminar.addEventListener('click', async() => {
        console.log('me diste click')
        const id = btnEliminar.dataset.id
        console.log(id)
        try {
            const data = await fetch(`/servicios/${id}`, {
                method : 'delete'
            })
            const res = await data.json()

            if (res.estado){
                window.location.href = '/servicios'
            }else{
                console.log(res)
            }
        } catch (error) {
            console.log(error)
        }
    })
</script>
